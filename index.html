<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Basket Analiz</title>
</head>
<body>

<h2>Basket Analiz Sistemi</h2>

<input type="number" id="oran1" placeholder="Oran 1">
<br><br>

<input type="number" id="oran2" placeholder="Oran 2">
<br><br>

<button onclick="analiz()">Analiz Et</button>

<h3 id="sonuc"></h3>

<button onclick="resetAnaliz()">Temizle / Yeni Maç</button>

<script>
function resetAnaliz() {
    fetch("https://basket-api-ro0g.onrender.com/reset", {
        method: "POST"
    })
    .then(res => res.json())
    .then(data => {
        alert("Yeni maç başlatıldı")
    })
}
</script>


<script>

async function analiz() {

    const sonuc = document.getElementById("sonuc");

    sonuc.innerText = "Bağlanıyor... (ilk açılış 30 sn sürebilir)";

    const oran1 = Number(document.getElementById("oran1").value);
    const oran2 = Number(document.getElementById("oran2").value);

    try {

        const res = await fetch(
            "https://basket-api-ro0g.onrender.com/analyze",
            {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    oran1: oran1,
                    oran2: oran2
                })
            }
        );

        const data = await res.json();

        sonuc.innerText = "Sonuç: " + data.sonuc;

    } catch (e) {

        sonuc.innerText =
            "Bağlantı kurulamadı. API uyandırılıyor, tekrar dene.";

        console.log(e);

    }

}

</script>

</body>
</html>
